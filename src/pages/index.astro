---
import BaseLayout from "../layouts/Layout.astro";
import { getCollection, type InferEntrySchema } from "astro:content";
const posts = await getCollection("blog");
type Post = {
  data: InferEntrySchema<"blog">;
};

const byDateDesc = (a: Post, b: Post) => b.data.date.getTime() - a.data.date.getTime();
---

<BaseLayout title="陈刑's Tech Guides">
  <div class="p-6">
    <div class="border-3 border-black p-6 mb-8 bg-[#FFD166] shadow-neo">
      <h1 class="text-5xl font-black uppercase mb-2">ARCH LINUX & UNIX TOOLKIT</h1>
      <p class="text-xl">Practical system guides and step-by-step tutorials for developers and enthusiasts</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {
        posts.sort(byDateDesc).map((post, index) => (
          <a href={`/${post.id}`} class="border-3 border-black p-5 shadow-neo hover:shadow-none bg-white transition-all hover:translate-y-0.5">
            <div class="flex justify-between items-start">
              <h2 class="text-2xl font-black">{post.data.title}</h2>
              <div class="border-3 border-black bg-[#ff6b6b] text-white w-8 h-8 flex items-center justify-center font-bold ml-3 flex-shrink-0">{post.data.category === "terminal" ? ">" : post.data.category === "config" ? "⚙" : post.data.category === "desktop" ? "🖥️" : post.data.category === "hardware" ? "💾" : post.data.category === "network" ? "🌐" : post.data.category === "package-management" ? "📦" : post.data.category === "security" ? "🔒" : "#"}</div>
            </div>

            <div class="flex justify-between mt-4">
              <span class="bg-black text-white px-2 py-1 text-sm font-semibold">{post.data.date.toLocaleDateString("en-US", { month: "short", day: "numeric" })}</span>
              <span class="border-3 border-black px-2 py-1 text-sm font-bold">{Math.floor(Math.random() * 8 + 3)} MIN READ</span>
            </div>
          </a>
        ))
      }
    </div>
  </div>
</BaseLayout>
